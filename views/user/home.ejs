<%-include("../partials/user/head.ejs")%>
<link rel="stylesheet" href="/css/user/home.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
<body class="bg-[#F2F2F2]  flex flex-col h-screen">
    <header class="bg-[#5E8E99] md:px-10 px-2 py-2 lg:py-0 ">
        <div class="flex justify-between lg:justify-around  items-center"> <!--Top logo sign in cart-->
            <div class="flex items-center space-x-3 lg:space-x-1 xl:space-x-5 md:space-x-5"> <!--left-->
                    <a id="menuButton" onclick="openNav();return false;" href="" class="flex items-center"><!--menu-->
                        <img class="h-[18px] md:h-6 lg:hidden" src="/images/menuWhite.png" alt="">
                    </a> 
                <a href="" class="flex items-center"><!--Logo-->
                    <img class="h-7 md:h-8 lg:h-10" src="/images/Logo.png" alt="">
                </a> 
                <!--Search on Desktop-->
                <form  class="hidden outline-none  mb-3 lg:flex lg:items-center  rounded-md py-2 mt-3 searchDesktopHeader">
                    <input  placeholder="Search books here "  class="md:py-2   placeholder:text-sm  w-full lg:w-[25rem] xl:w-[30rem]  rounded-l-md px-2 outline-none  text-sm bg-blue-50 searchHeaderInput" type="text" name="" >
                    <button type="submit" class="bg-[#DAA520] w-fit px-2 py-[6px] rounded-r-md">
                        <img class="h-5 md:h-6 object-contain lg:h-6" src="/images/search.png"     alt="">
                    </button>
                </form>
            </div>
            <div class="flex items-center  space-x-4 lg:space-x-12"><!--right-->
               <div href="" class="flex items-center space-x-1 text-white ">
                    <img class="h-4 md:h-6" src="/images/user white filled .png"  alt="">
                    <% if(user) {%>
                        <% const firstName = user.split(' ')[0]; %>
                        <a href="/user/myAccount" class="text-sm font-medium md:text-base capitalize"><%= firstName %></a>
                    <%  }else{%>
                        <a href="/user/login" class="text-sm font-medium md:text-base">Sign in</a>
                    <% } %>
                </div>
               <a href="/user/myCart" class="lg:flex items-center lg:space-x-1">
                    <img class="h-5 md:h-7" src="/images/shopping-cart white.png" alt="">
                    <p class="font-medium textsm  md:text-base text-white hidden lg:block">Cart</p>
               </a>
               <button class=" items-center  hidden lg:block relative group" id="moreIconContainer">
                    <div class="flex items-center peer" > <!--Drop down menu-->
                        <p class="font-medium text-white text-lg ">More</p>
                        <span id="moreIcon"  class="material-symbols-outlined text-white mt-[2px]">
                            expand_more
                        </span>
                    </div>
                    <div id="dropDownContents" class="dropdown_contents absolute z-10 top-[15px] right-[-100%] min-w-[190px]  group-hover:block  ">  <!--Dropdown contents-->
                        <a href="" class="flex items-center space-x-5 px-2 py-2 border-b-[.2px] border-b-[#666666] hover:bg-gray-100 -z-10 invisible ">
                            <img class="h-4" src="/images/user blue filled.png" alt="">
                            <p class="text-sm text-[#666666]">My Account</p>
                        </a>
                        <a href="/user/myaccount" class="flex bg-white items-center space-x-5 px-2 py-3 border-b-[.2px] border-b-[#666666] hover:bg-gray-100 rounded-t-sm">
                            <img class="h-4" src="/images/user blue filled.png" alt="">
                            <p class="text-sm text-[#666666]">My Account</p>
                        </a>
                        <a href="/user/myCart" class="flex bg-white items-center space-x-5 px-2 py-3 border-b-[.2px] border-b-[#666666] hover:bg-gray-100 ">
                            <img class="h-4" src="/images/shopping-cart blue.png" alt="">
                            <p class="text-sm text-[#666666]">My Cart</p>
                        </a>
                        <a href="/user/wishList" class="flex bg-white items-center space-x-5 px-2 py-3 border-b-[.2px] border-b-[#666666] hover:bg-gray-100 ">
                            <img class="h-4" src="/images/heart fill blue.png" alt="">
                            <p class="text-sm text-[#666666]">Wish List</p>
                        </a>
                        <a href="/user/yourOrders" class="flex bg-white items-center space-x-5 px-2 py-3 border-b-[.2px] border-b-[#666666] hover:bg-gray-100 ">
                            <img class="h-4" src="/images/location blue filled.png" alt="">
                            <p class="text-sm text-[#666666]">My Orders</p>
                        </a>
                        <a href="/user/aboutUs" class="flex bg-white items-center space-x-5 px-2 py-3 border-b-[.2px] border-b-[#666666] hover:bg-gray-100 ">
                            <img class="h-4" src="/images/open-book blue.png" alt="">
                            <p class="text-sm text-[#666666]">About Us</p>
                        </a>
                        <a href="/user/contactUs" class="flex bg-white items-center space-x-5 px-2 py-3 border-b-[.2px] border-b-[#666666] hover:bg-gray-100  ">
                            <img class="h-4" src="/images/phone blue filled.png" alt="">
                            <p class="text-sm text-[#666666]">Contact Us</p>
                        </a>
                        <form action="/user/logOut" id="logOutForm">
                            <div onclick="logOut()"  class="flex bg-white items-center space-x-5 px-2 py-3 border-b-[.2px] border-b-[#666666] hover:bg-gray-100 rounded-b-md ">   
                                <img    class="h-4" src="/images/logout (1) blue.png" alt="">
                                <p  class="text-sm text-[#666666]">Log Out</p>
                            </div>
                           
                        </form>
                    </div>
               </button>
            </div>
        </div>
        <form
        
        
        class="lg:hidden searchDesktopHeader"> <!--Search-->
            <div class="flex px-7 sm:px-16 rounded-md py-2 mt-3">
                <input placeholder="Search books here "  class="md:py-2 searchHeaderInput placeholder:text-xs  w-full rounded-l-md px-2 outline-none text-sm" type="text" name="" id="">
                <button type="submit" class="bg-[#DAA520] flex items-center w-fit px-2 py-1 rounded-r-md">
                    <img class="h-5 object-contain" src="/images/search.png" alt="">
                </button>
            </div>
        </form>
    </header>
    <!--search Containe-->
    <div class="searchResult-Container">

    </div>

    <main class="px-2 py-3">
        <div id="TopCategorycontainer" class=" flex space-x-2 md:space-x-4   overflow-auto relative"> <!--Top category sldier -->
            <%categories.slice(0, 8).forEach(function(data){%>
                <a href="/user/products/<%= encodeURIComponent(data.categoryName)%>" class="bg-gray-200  border-b-[#333333] border-[.1px] hover:drop-shadow-md hover:border lg:min-w-[150px]  min-w-[92px] md:min-w-[102px] rounded-md drop-shadow-sm ">
                    <img class="rounded-t-md lg:w-[150px] lg:h-[120px] w-[92px] md:w-[102px] h-[88px] object-cover grayscale-[40%]" src="<%=data.imageUrl%>" alt="">
                    <div class="flex justify-center items-center  ">
                        <span class=" py-2  text-[11px] max-w-[110px] font-normal text-[#333333] lg:max-w-[130px] truncate lg:text-sm "><%=data.categoryName%></span>
                    </div>
                   
                </a>
            <% })%>
             <a href="/user/category" class="border-[.2px] border-[#666666] lg:min-w-[150px]  min-w-[92px] md:min-w-[102px] rounded-md drop-shadow-sm flex justify-center  items-center ">
                <span class="text-[#666666] text-xs lg:text-sm">See more</span>
                <span class="material-symbols-outlined text-sm lg:text-base  text-[#666666]">
                    chevron_right
                    </span>
            </a>
        </div>
        
        <div class="relative"> <!--Animating slide-->
            <div class="mt-3 "><!--Container-->
                <div class="hidden h-52  bg-no-repeat w-full mySlides fade bg-[url('<%=banners[0].imageUrl %>')] sm:bg-[url('<%=banners[1].imageUrl%>')] bg-cover bg-center">
                </div>
                <div class="hidden h-52  bg-no-repeat w-full mySlides fade bg-[url('<%=banners[2].imageUrl %>')] sm:bg-[url('<%=banners[3].imageUrl %>')] bg-cover bg-center ">
                </div>
                <div class="hidden h-52  bg-no-repeat w-full mySlides fade bg-[url('<%=banners[4].imageUrl %>')] sm:bg-[url('<%=banners[5].imageUrl %>')] bg-cover bg-center ">
                </div>
                
                
                
            </div>
            <div class="absolute top-[40%] right-0  rounded-[50%] cursor-pointer bg-gray-100 m-[5px] inline-block " onclick="plusSlides(1)">
                <span class="material-symbols-outlined  text-center h-5 w-5 align-middle table-cell text-[#666666] ">
                    chevron_right
                </span>
            </div>
               <!--slide icon left-->
            <div class="absolute  top-[40%] left-0 rounded-[50%] cursor-pointer bg-gray-100 m-[5px] inline-block" onclick="plusSlides(-1)">
                
                <span class="material-symbols-outlined  text-center h-5 w-5 align-middle table-cell text-[#666666] ">
                    chevron_left
                </span>
            </div>
         
            <div class="bottom-0 absolute right-[40%]" style="text-align:center">
                <span class="dot" onclick="currentSlide(1)"></span> 
                <span class="dot" onclick="currentSlide(1)"></span> 
                <span class="dot" onclick="currentSlide(1)"></span> 
            </div>
        </div>
        <div class="mt-3 mx-[-10px] "> <!--Catergoris container-->
            <%categories.slice(0, 7).forEach(function(data){%>
                <div> <!--Novel conatiner-->
                    <div class="bg-[#CDDCDF]  px-3 py-[2px]">
                        <span class="text-[#565656]  font-semibold lg:text-base"><%=data.categoryName%></span>
                    </div>
                    <div class="flex space-x-[10px] mb-3 md:space-x-4 lg:space-x-7 px-2 lg:px-5 mt-3 w-full overflow-auto"> <!--Books group container-->
                        <% products.filter(function(product) { return product.category === data.categoryName; }).slice(0, 7).forEach(function(product) { %>
                            <a href="/user/product/<%= encodeURIComponent(product._id)%>" class="bg-white hover:scale-105 hover:bg-slate-50 md:min-w-[135px] md:max-w-[135px]  min-w-[119px] max-w-[119px] max-h-44  rounded-md drop-shadow-sm  pt-2 pb-1 relative lg:min-h-[200px] lg:min-w-[160px] w-3 lg:pb-52 hover:drop-shadow-xl"> 
                                <div class="flex items-center justify-center"> 
                                    <img class="rounded-t-md w-[115px] md:w-[135px] h-[93px] md:h-[100px] object-contain pb-2 border-b lg:min-h-[120px] lg:min-w-[150px]" src="<%=product.imageUrl %>" alt="">
                                </div>
                                <div class="flex flex-col items-center ">
                                    <p class="mt-2 text-[#4B727A] font-semibold text-[13px] max-w-[110px] lg:max-w-[140px] truncate lg:text-sm"><%=product.bookName %></p>
                                    <p class="text-[#5E8E99] font-normal text-[11px] max-w-[110px] lg:max-w-[130px] truncate lg:text-xs"><%=product.author%></p>
                                    <div class="mt-[-5px] lg:mt-[1px]">
                                        <span class="text-[11px] font-semibold text-[#008000] lg:text-sm"><%=product.discount%>% off</span> <span class="text-[11px] text-[#666666] line-through lg:text-xs"><%=product.MRP%></span> <span class="text-[11px] font-bold lg:text-sm">₹<%=product.salePrice%></span></div>
                                </div>
                                <button id="addtoCart" data-product-id="<%= product._id %>" class="absolute rounded-lg bg-[#DAA520] hover:bg-[#c4951d] top-2 -right-[8%] md:-right-[12%] lg:-right-[10%] z-20 add-to-cart-button ">
                                    <div class="flex  items-center px-1 py-[1px]  text-white space-x-[2px] lg:px-2 lg:py-1 ">
                                        <p  class="text-xs lg:text-sm font-medium cartNotification">Add</p>
                                        <img class="h-3 lg:h-4 cart-image" src="/images/shopping-cart white.png" alt="">
                                    </div>
                                </button>
                            </a>
                            <% }); %>
                        <!--item-->
                       
                           <!--item-->
                           <a href="/user/products/<%= encodeURIComponent(data.categoryName) %>" class="border-[.2px] border-[#666666] bg-gray-50 md:min-w-[135px] md:max-w-[135px]  min-w-[119px] max-w-[119px] max-h-44 cursor-pointer  rounded-md drop-shadow-sm  pt-2 pb-1 relative lg:min-h-[200px] lg:min-w-[160px] w-3 lg:pb-52  flex items-center justify-center  "> 
                            <div class="absolute flex justify-center items-center top-[45%] ">
                                <span class="text-[#666666] text-xs lg:text-sm ">See more</span>
                                <span class="material-symbols-outlined text-sm lg:text-base  text-[#666666]">
                                chevron_right
                                </span>
                            </div>
                            
                        </a>
                    </div>
                </div>
            <% })%>
            

          
        </div>
        <a href="/user/category"><!--See All categories-->
            <div  class="">
                <button class="flex items-center justify-between bg-white my-3 hover:border-y hover:border-y-black  px-3 border w-full py-1 text-sm">
                    <span>See all categories</span>
                    <span class="material-symbols-outlined">
                    chevron_right
                    </span>
                </button>
            </div>
        </a>
       
    </main>
         
    <div class="flex-grow">
    </div>
    <%-include("../partials/user/userFooter.ejs")%>
        <div  id="SidebarContainerr" class="h-full w-full absolute inset-0 bg-[rgba(0,0,0,0.6)] invisible   transition-all duration-75">
            <div id="Sidebar" class="flex flex-col -translate-x-[250px] w-[250px] h-full  overflow-hidden fixed top-0 left-0 transition-all duration-300 ease-in "><!--Side bar Mobile-->
                <div class="bg-[#5E8E99] min-h-[100px] max-h-[100px] py-5 flex justify-between items-center ">
                    <div class="space-y-2 whitespace-nowrap ">
                        <div href="" class="px-3 flex items-center space-x-1 text-white">
                            <img class="h-6" src="/images/user white filled .png" alt="">
                            <% if(locals.user) {%>
                                <% const firstName = user.split(' ')[0]; %>
                                <p class="mt-1"><%=firstName %></p>
                            <%  }else{%>
                                <a href="/user/login" class="mt-1">Sign In</a>
                            <% } %>
                           
                        </div>
                             <p class="px-3 text-white text-xs whitespace-nowrap">Open Books ,Open Doors.. </p>
                    </div>
                    <span onclick="hideSidebar()" class="material-symbols-outlined text-white pr-3">
                        close
                    </span>
                        
               </div>
               <div class="h-full  bg-white">
                <div>
                    <a href="/user/myaccount" class="whitespace-nowrap flex bg-white items-center space-x-5 px-2 py-3 border-b-[.2px] border-b-[#666666] hover:bg-gray-100 rounded-t-sm">
                        <img class="h-4" src="/images/user blue filled.png" alt="">
                        <p class="text-sm text-[#666666]">My Account</p>
                    </a>
                    <a href="/user/myCart" class="whitespace-nowrap flex bg-white items-center space-x-5 px-2 py-3 border-b-[.2px] border-b-[#666666] hover:bg-gray-100 ">
                        <img class="h-4" src="/images/shopping-cart blue.png" alt="">
                        <p class="text-sm text-[#666666]">My Cart</p>
                    </a>
                    <a href="/user/wishList" class="whitespace-nowrap flex bg-white items-center space-x-5 px-2 py-3 border-b-[.2px] border-b-[#666666] hover:bg-gray-100 ">
                        <img class="h-4" src="/images/heart fill blue.png" alt="">
                        <p class="text-sm text-[#666666]">Wish List</p>
                    </a>
                    <a href="/user/yourOrders" class="whitespace-nowrap flex bg-white items-center space-x-5 px-2 py-3 border-b-[.2px] border-b-[#666666] hover:bg-gray-100 ">
                        <img class="h-4" src="/images/location blue filled.png" alt="">
                        <p class="text-sm text-[#666666]">My Orders</p>
                    </a>
                    <a href="/user/aboutUs" class=" whitespace-nowrap flex bg-white items-center space-x-5 px-2 py-3 border-b-[.2px] border-b-[#666666] hover:bg-gray-100 ">
                        <img class="h-4" src="/images/open-book blue.png" alt="">
                        <p class="text-sm text-[#666666]">About Us</p>
                    </a>
                    <a href="/user/contactUs" class="whitespace-nowrap flex bg-white items-center space-x-5 px-2 py-3 border-b-[.2px] border-b-[#666666] hover:bg-gray-100  ">
                        <img class="h-4" src="/images/phone blue filled.png" alt="">
                        <p class="text-sm text-[#666666]">Contact Us</p>
                    </a>
                </div>
              
               
               
                </div>
                <div class="flex-grow">

                </div>
                <div class="px-2 bg-white pb-5">
                    <a href="/user/logOut" class="whitespace-nowrap  rounded-md flex  bg-red-600 border justify-center items-center space-x-2 px-2 py-3  hover:bg-gray-100  ">
                        <img class="h-4" src="/images/logoutwhite.png" alt="">
                        <p class="text-sm  font-medium text-white">Log Out</p>
                    </a>
                </div>
           </div>
        </div>
   
    
</body>
<script src="/javascripts/user/home.js" ></script>
<script src="../../../javascripts/admin/adminHeader.js"></script>
<script src="../../javascripts/user/common.js"></script>